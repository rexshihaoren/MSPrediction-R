demo()
dnorm
help()
dbinom(2.51)
pnorm(0)
binorm(2.51)
bnorm(2.51)
pnorm(2.51)
n=200
p=.45
q=
.55
sqrt(npq)
sqrt(n*p*q)
sd=sqrt(n*p*q)
sd
sd
mu=n*p
pnorm((mu+.5-mu)/sd)-pnorm((mu-.5-mu)/sd)
pnorm(10.5/7.0356)
*-1
1-pnorm(10.5/7.0356)
1-pnorm(100.5-mu/sd)
1-pnorm(100.5-mu/sd)
1-pnorm(100.5-90/7.0356)
1-pnorm(10.5/7.0356)
1-pnorm((100.5-mu)/sd)
pnorm((100.5-100/5)-pnorm((99.5-100)/5)
pnorm((100.5-100/5)-pnorm((99.5-100)/5)
pnorm((100.5-100/5))-pnorm((99.5-100)/5)
clc
clearn
clear
clean
sqrt(100/4)
sqrt(200/4)
sd=sqrt(200/4)
pnorm((100.5-100)/sd)-pnorm((99.5-100)/sd)
e^(100) * 100^0
exp(100) * 100^0
exp(-100) * 100^0
exp(-0.0567198*30)
3exp(-2)
3*exp(-2)
2*exp(-2)
1-5*exp(-2)
6*exp(-4)
exp(5/3) *(5/3)^2 /2
exp(.5) *(.6)^2 /2
exp(.5) *(.6)
exp(.6) *(.6)
exp(.6) *(.6)^2/2
exp(.6) *(.6)
exp(-5/3) *(5/3)^2 /2
exp(-5/3) *(5/3)
exp(-5/3) *(5/3)
exp(-5/3)
exp(-5/3) *8/3
load("~/Dropbox/research/MSBioScreen/MSPrediction-R/Data Scripts/step3/data.RData")
str(allQOL)
ls
ls()
str(fam2)
str(fam)
str(fams)
load("./step1/result.RData")
load("step1/result.RData")
load("~/Dropbox/research/MSBioScreen/MSPrediction-R/Data Scripts/step1/result.RData")
ls()
str(allQOL)
load("~/Dropbox/research/MSBioScreen/MSPrediction-R/Data Scripts/step0/result.RData")
...
install.packages("xlsx")
install.packages("foreign")
install.packages("foreach")
install.packages("multicore")
install.packages("XML")
install.packages("googleVis")
install.packages("reshape")
install.packages("xlsx")
install.packages("foreign")
install.packages("foreign")
"foreach"
install.packages("foreach")
install.packages("foreach")
install.packages("multicore")
install.packages(c("lattice", "Matrix", "mgcv", "nlme", "rpart", "survival"))
install.packages("XML")
install.packages("googleVis")
install.packages("googleVis")
install.packages("reshape")
library("spatial", lib.loc="/Library/Frameworks/R.framework/Versions/3.0/Resources/library")
library("splines", lib.loc="/Library/Frameworks/R.framework/Versions/3.0/Resources/library")
library("rstudio", lib.loc="/Library/Frameworks/R.framework/Versions/3.0/Resources/library")
library("foreign", lib.loc="/Library/Frameworks/R.framework/Versions/3.0/Resources/library")
library("googleVis", lib.loc="/Library/Frameworks/R.framework/Versions/3.0/Resources/library")
library("multicore", lib.loc="/Library/Frameworks/R.framework/Versions/3.0/Resources/library")
library("parallel", lib.loc="/Library/Frameworks/R.framework/Versions/3.0/Resources/library")
library("XML", lib.loc="/Library/Frameworks/R.framework/Versions/3.0/Resources/library")
library("reshape", lib.loc="/Library/Frameworks/R.framework/Versions/3.0/Resources/library")
library("foreach", lib.loc="/Library/Frameworks/R.framework/Versions/3.0/Resources/library")
library("xlsx", lib.loc="/Library/Frameworks/R.framework/Versions/3.0/Resources/library")
ls()
for g in c(4:7){}
1808/2187
require(ggplot2)
require(rhdf5)
pnorm(1.363)
1-pnorm(1.3363)
1-pnorm(.3095800853708794)
1-pnorm(1.3095800853708794)
pnorm(.1)-pnorm(-.1)
13^2/15^2
13^2/15^2*.5
1-(5/15)^10
1+(5/15)^10-2*(10/15)^10
x=1
y =5*.5^4*x-x^5/5
x=.5
x =1
x = .5
y2 =5*.5^4*x-x^5/5
y2-y1
y2-y
x =1
y =5*.5^4*x-x^5
y2 =5*.5^4*x-x^5
x=.5
y2 =5*.5^4*x-x^5
y2=y
y2 =5*.5^4*x-x^5
y2-y
31/32
y2 =-5*.5^4*x+x^5
x=1
y =-5*.5^4*x+x^5
y-y2
31/32
5(1/5-.5^4-(.5^5/5-.5^5))
u=5(1/5-.5^4-(.5^5/5-.5^5))
5(1/5-.5^4-(.5^5/5-.5^5)))
pnorm(5/sqrt(13))
1-pnorm(5/sqrt(13))
2pnorm(1)-pnorm(1)^2
2*pnorm(1)-pnorm(1)^2
pnorm(1)-pnorm(-1)
pnorm(1/sqrt(2))
pnorm(1)-pnorm(-1)
pnorm(2000/sqrt(2000000))
1-pnorm(2000/sqrt(2000000))
1-pnorm(1.41
)
(1-pnorm(1))*(1-pnorm(-1))
setwd("~/Dropbox/research/MSBioScreen/MSPrediction-R/Data Scripts")
# get modified-fam2
require(ggplot2)
require(rhdf5)
require(MASS)
modfam2<-read.csv("step3/data_all.csv")
# fetch original fam2
load("step1/result.RData")
# Merge fam2, modfam2, fullTable3
#First change fam2 colname "VisitId" to "VisitID"
colnames(fam2)[1] = "VisitID"
#merged = merge(fam2, modfam2, by = "VisitID", all.y = TRUE)
merged = merge(fam2, modfam2)
merged <- merge(merged, fullTable3)
# only 5 cols, group1~3, relative-pain, enjoylife
modfam2<-modfam2[,9:13]
# get rid visitID
fam2<-fam2[,-1]
# plotting histogram given a dataframe and a target column, and a filename
genhisto<-function(somedf, target, filename){
filepath = paste("plots/",filename, ".pdf",sep="")
ggplot(somedf) + geom_histogram(aes_string(x=target))
# ggsave(file="plots/modfam2.pdf")
ggsave(file=filepath)
}
genhisto(modfam2, "EnjoyLife", "modfam2")
genhisto(fam2, "EnjoyLife", "fam2")
# Binarize EnjoyLife
# find the enjoy life median
medianEL<- median(modfam2$EnjoyLife)
# binarize the modfam2, fam2
modfam2$EnjoyLife<-ifelse(modfam2$EnjoyLife <= medianEL, 0, 1)
fam2$EnjoyLife<-ifelse(fam2$EnjoyLife <= medianEL, 0, 1)
# Plot PDF after binarize
genhisto(modfam2, "EnjoyLife", "bin_modfam2")
genhisto(fam2, "EnjoyLife", "bin_fam2")
#save binarized fam2,modfam2, merged in HDF5 format
h5createFile('data/predData.h5')
h5write(fam2, "data/predData.h5","fam2")
h5write(modfam2,"data/predData.h5","modfam2")
h5write(merged, "data/predData.h5", "merged")
# Plot Conditional PDF
generateCPDF<-function(somedf, plotfunc, target){
dfname = deparse(substitute(somedf))
pfname = deparse(substitute(plotfunc))
for (i in colnames(somedf)){
if (i != target){
if (pfname == "geom_density"){
ggplot(somedf) + plotfunc(aes_string(x=i, group = target, color = target))
} else {
ggplot(somedf) + plotfunc(aes_string(x=i, group = target, fill = target), position = "dodge")
}
fpath = paste("plots/",paste(dfname, "cpdf",i, sep = "_"), ".pdf", sep="")
ggsave(file = fpath)
}
}
}
generateCPDF(modfam2,geom_density, "EnjoyLife")
generateCPDF(fam2, geom_histogram, "EnjoyLife")
n <- 50
m <- 50
set.seed(1)
mu <- -0.4
sig <- 0.12
x <- matrix(data=rlnorm(n*m, mu, sig), nrow=m)
library(fitdistrplus)
f <- apply(x, 2,  fitdist, "lnorm")
for(i in 1:n)
plot(f[[i]])
op <- options(digits = 3)set.seed(123)x <- rgamma(100, shape = 5, rate = 0.1)
op <- options(digits = 3)
set.seed(123)
x <- rgamma(100, shape = 5, rate = 0.1)
f
f <- fitdistr(x, dgamma, list(shape = 1, rate = 0.1), lower = 0.001)
f
for(i in 1:n)
plot(f[[i]])
for(i in 1:n)
plot(f[i])
n <- 50
m <- 50
set.seed(1)
mu <- -0.4
sig <- 0.12
x <- matrix(data=rlnorm(n*m, mu, sig), nrow=m)
f <- apply(x, 2,  fitdistr, "lnorm")
f <- apply(x, 2,  fitdist, "lnorm")
plot(f[[1]])
plot(f[[2]])
plot(f[[3]])
plot(f[[4]])
plot(f)
f <- fitdistr(x, dgamma, list(shape = 1, rate = 0.1), lower = 0.001)
plot(f)
f
